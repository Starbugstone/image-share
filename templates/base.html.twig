<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <title>{% block title %}ImageShare{% endblock %}</title>
        <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 128 128%22><text y=%221.2em%22 font-size=%2296%22>âš«</text></svg>">
        {% block stylesheets %}
            {# Vue.js frontend will be loaded here #}
            {% if app.environment == 'dev' %}
                {# Development: Load from Vite dev server #}
                <script type="module" src="http://localhost:5175/@vite/client"></script>
                <script type="module" src="http://localhost:5175/src/main.js"></script>
            {% else %}
                {# Production: Load built files #}
                {% if app.request.get('_route') starts with 'app_' %}
                    {# API routes - no frontend needed #}
                {% else %}
                    {# Frontend routes - load Vue.js app #}
                    <link rel="stylesheet" href="{{ asset('dist/assets/index.css') }}">
                    <script type="module" src="{{ asset('dist/assets/index.js') }}"></script>
                {% endif %}
            {% endif %}
            
            {# Font Awesome for icons #}
            <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
            
            {# Fallback styles for when Vue.js is loading #}
            <style>
                body {
                    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
                    min-height: 100vh;
                    margin: 0;
                    font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
                }
                
                .loading-container {
                    display: flex;
                    justify-content: center;
                    align-items: center;
                    min-height: 100vh;
                    color: white;
                    text-align: center;
                }
                
                .loading-spinner {
                    width: 50px;
                    height: 50px;
                    border: 3px solid rgba(255,255,255,0.3);
                    border-radius: 50%;
                    border-top-color: white;
                    animation: spin 1s ease-in-out infinite;
                    margin: 0 auto 1rem;
                }
                
                @keyframes spin {
                    to { transform: rotate(360deg); }
                }
            </style>
        {% endblock %}

        {% block javascripts %}
            {# JavaScript will be handled by Vue.js #}
        {% endblock %}
    </head>
    <body>
        {# Loading state while Vue.js initializes #}
        <div id="loading" class="loading-container">
            <div>
                <div class="loading-spinner"></div>
                <h2>Loading ImageShare...</h2>
                <p>Please wait while we prepare your experience</p>
            </div>
        </div>

        {# Vue.js app container #}
        <div id="app" style="display: none;"></div>

        {# Hide loading, show app when Vue.js is ready #}
        <script>
            // Hide loading and show app when Vue.js is ready
            document.addEventListener('DOMContentLoaded', function() {
                // Give Vue.js a moment to initialize
                setTimeout(function() {
                    const loading = document.getElementById('loading');
                    const app = document.getElementById('app');
                    
                    if (loading && app) {
                        loading.style.display = 'none';
                        app.style.display = 'block';
                    }
                }, 1000);
            });
        </script>
    </body>
</html>
